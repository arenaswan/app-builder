{"version":3,"sources":["../../../src/components/ColorPicker/index.tsx"],"names":["ColorPicker","color","placement","presetColors","presetColumns","interactive","children","onChange","triggerProps","addonBefore","addonAfter","visible","setVisible","validatedColor","currentColor","setCurrentColor","handleApply","handleCancel","actions","push","handleInputChange","newColor","toUpperCase","backgroundColor","className","defaultProps","Input","ColorInput","Swatch","Label"],"mappings":"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","sourcesContent":["import { toString } from \"lodash\";\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport cx from \"classnames\";\r\nimport Popover from \"antd/lib/popover\";\r\nimport Card from \"antd/lib/card\";\r\nimport Tooltip from \"antd/lib/tooltip\";\r\nimport chooseTextColorForBackground from \"@/lib/chooseTextColorForBackground\";\r\n\r\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\r\nimport CheckOutlinedIcon from \"@ant-design/icons/CheckOutlined\";\r\n\r\nimport ColorInput from \"./Input\";\r\nimport Swatch from \"./Swatch\";\r\nimport Label from \"./Label\";\r\nimport { validateColor } from \"./utils\";\r\n\r\nimport \"./index.less\";\r\n\r\ntype OwnProps = {\r\n  color?: string;\r\n  placement?:\r\n    | \"top\"\r\n    | \"left\"\r\n    | \"right\"\r\n    | \"bottom\"\r\n    | \"topLeft\"\r\n    | \"topRight\"\r\n    | \"bottomLeft\"\r\n    | \"bottomRight\"\r\n    | \"leftTop\"\r\n    | \"leftBottom\"\r\n    | \"rightTop\"\r\n    | \"rightBottom\";\r\n  presetColors?:\r\n    | string[]\r\n    | {\r\n        [key: string]: string;\r\n      };\r\n  presetColumns?: number;\r\n  interactive?: boolean;\r\n  triggerProps?: any;\r\n  children?: React.ReactNode;\r\n  addonBefore?: React.ReactNode;\r\n  addonAfter?: React.ReactNode;\r\n  onChange?: (...args: any[]) => any;\r\n};\r\n\r\ntype Props = OwnProps & typeof ColorPicker.defaultProps;\r\n\r\nexport default function ColorPicker({\r\n  color,\r\n  placement,\r\n  presetColors,\r\n  presetColumns,\r\n  interactive,\r\n  children,\r\n  onChange,\r\n  triggerProps,\r\n  addonBefore,\r\n  addonAfter,\r\n}: Props) {\r\n  const [visible, setVisible] = useState(false);\r\n  const validatedColor = useMemo(() => validateColor(color), [color]);\r\n  const [currentColor, setCurrentColor] = useState(\"\");\r\n\r\n  function handleApply() {\r\n    setVisible(false);\r\n    if (!interactive) {\r\n      // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\r\n      onChange(currentColor);\r\n    }\r\n  }\r\n\r\n  function handleCancel() {\r\n    setVisible(false);\r\n  }\r\n\r\n  const actions = [];\r\n  if (!interactive) {\r\n    actions.push(\r\n      <Tooltip key=\"cancel\" title=\"Cancel\">\r\n        <CloseOutlinedIcon onClick={handleCancel} />\r\n      </Tooltip>\r\n    );\r\n    actions.push(\r\n      <Tooltip key=\"apply\" title=\"Apply\">\r\n        <CheckOutlinedIcon onClick={handleApply} />\r\n      </Tooltip>\r\n    );\r\n  }\r\n\r\n  function handleInputChange(newColor: any) {\r\n    setCurrentColor(newColor);\r\n    if (interactive) {\r\n      // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\r\n      onChange(newColor);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string | null' is not assignable... Remove this comment to see the full error message\r\n      setCurrentColor(validatedColor);\r\n    }\r\n  }, [validatedColor, visible]);\r\n\r\n  return (\r\n    <span className=\"color-picker-wrapper\">\r\n      {addonBefore}\r\n      <Popover\r\n        arrowPointAtCenter\r\n        overlayClassName={`color-picker ${interactive ? \"color-picker-interactive\" : \"color-picker-with-actions\"}`}\r\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"--color-picker-selected-color\": string; }... Remove this comment to see the full error message\r\n        overlayStyle={{ \"--color-picker-selected-color\": currentColor }}\r\n        content={\r\n          <Card\r\n            data-test=\"ColorPicker\"\r\n            className=\"color-picker-panel\"\r\n            bordered={false}\r\n            title={toString(currentColor).toUpperCase()}\r\n            headStyle={{\r\n              backgroundColor: currentColor,\r\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\r\n              color: chooseTextColorForBackground(currentColor),\r\n            }}\r\n            actions={actions}>\r\n            <ColorInput\r\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\r\n              color={currentColor}\r\n              presetColors={presetColors}\r\n              presetColumns={presetColumns}\r\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(newColor: any) => void' is not assignable t... Remove this comment to see the full error message\r\n              onChange={handleInputChange}\r\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '() => void' is not assignable to type 'never... Remove this comment to see the full error message\r\n              onPressEnter={handleApply}\r\n            />\r\n          </Card>\r\n        }\r\n        trigger=\"click\"\r\n        placement={placement}\r\n        visible={visible}\r\n        onVisibleChange={setVisible}>\r\n        {children || (\r\n          <Swatch\r\n            color={validatedColor}\r\n            size={30}\r\n            {...triggerProps}\r\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type 'never... Remove this comment to see the full error message\r\n            className={cx(\"color-picker-trigger\", triggerProps.className)}\r\n          />\r\n        )}\r\n      </Popover>\r\n      {addonAfter}\r\n    </span>\r\n  );\r\n}\r\n\r\nColorPicker.defaultProps = {\r\n  color: \"#FFFFFF\",\r\n  placement: \"top\",\r\n  presetColors: null,\r\n  presetColumns: 8,\r\n  interactive: false,\r\n  triggerProps: {},\r\n  children: null,\r\n  addonBefore: null,\r\n  addonAfter: null,\r\n  onChange: () => {},\r\n};\r\n\r\nColorPicker.Input = ColorInput;\r\nColorPicker.Swatch = Swatch;\r\nColorPicker.Label = Label;\r\n"],"file":"index.js"}