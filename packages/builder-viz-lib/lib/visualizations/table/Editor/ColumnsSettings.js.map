{"version":3,"sources":["../../../../src/visualizations/table/Editor/ColumnsSettings.tsx"],"names":["Text","Typography","SortableItem","Collapse","Panel","ColumnsSettings","options","onOptionsChange","handleColumnChange","newColumn","event","stopPropagation","columns","c","name","handleColumnsReorder","oldIndex","newIndex","splice","container","firstChild","className","column","index","title","marginLeft","visible","propTypes","EditorPropTypes"],"mappings":"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","sourcesContent":["import { map } from \"lodash\";\r\nimport React from \"react\";\r\nimport Collapse from \"antd/lib/collapse\";\r\nimport Tooltip from \"antd/lib/tooltip\";\r\nimport Typography from \"antd/lib/typography\";\r\n// @ts-expect-error ts-migrate(2724) FIXME: Module '\"../../../../node_modules/react-sortable-h... Remove this comment to see the full error message\r\nimport { sortableElement } from \"react-sortable-hoc\";\r\nimport { SortableContainer, DragHandle } from \"@/components/sortable\";\r\nimport { EditorPropTypes } from \"@/visualizations/prop-types\";\r\n\r\nimport EyeOutlinedIcon from \"@ant-design/icons/EyeOutlined\";\r\nimport EyeInvisibleOutlinedIcon from \"@ant-design/icons/EyeInvisibleOutlined\";\r\n\r\nimport ColumnEditor from \"./ColumnEditor\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst SortableItem = sortableElement(Collapse.Panel);\r\n\r\nexport default function ColumnsSettings({ options, onOptionsChange }: any) {\r\n  function handleColumnChange(newColumn: any, event: any) {\r\n    if (event) {\r\n      event.stopPropagation();\r\n    }\r\n    const columns = map(options.columns, c => (c.name === newColumn.name ? newColumn : c));\r\n    onOptionsChange({ columns });\r\n  }\r\n\r\n  function handleColumnsReorder({ oldIndex, newIndex }: any) {\r\n    const columns = [...options.columns];\r\n    columns.splice(newIndex, 0, ...columns.splice(oldIndex, 1));\r\n    onOptionsChange({ columns });\r\n  }\r\n\r\n  return (\r\n    <SortableContainer\r\n      axis=\"y\"\r\n      lockAxis=\"y\"\r\n      useDragHandle\r\n      helperClass=\"table-editor-columns-dragged-item\"\r\n      helperContainer={(container: any) => container.firstChild}\r\n      onSortEnd={handleColumnsReorder}\r\n      containerProps={{\r\n        className: \"table-visualization-editor-columns\",\r\n      }}>\r\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\r\n      <Collapse bordered={false} defaultActiveKey={[]} expandIconPosition=\"right\">\r\n        {map(options.columns, (column, index) => (\r\n          <SortableItem\r\n            key={column.name}\r\n            index={index}\r\n            header={\r\n              <React.Fragment>\r\n                <DragHandle />\r\n                <span data-test={`Table.Column.${column.name}.Name`}>\r\n                  {column.name}\r\n                  {column.title !== \"\" && column.title !== column.name && (\r\n                    <Text type=\"secondary\" style={{ marginLeft: 5 }}>\r\n                      <i>({column.title})</i>\r\n                    </Text>\r\n                  )}\r\n                </span>\r\n              </React.Fragment>\r\n            }\r\n            extra={\r\n              <Tooltip title=\"Toggle visibility\" mouseEnterDelay={0} mouseLeaveDelay={0}>\r\n                {column.visible ? (\r\n                  <EyeOutlinedIcon\r\n                    data-test={`Table.Column.${column.name}.Visibility`}\r\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\r\n                  />\r\n                ) : (\r\n                  <EyeInvisibleOutlinedIcon\r\n                    data-test={`Table.Column.${column.name}.Visibility`}\r\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\r\n                  />\r\n                )}\r\n              </Tooltip>\r\n            }>\r\n            {/* @ts-expect-error ts-migrate(2322) FIXME: Type '(newColumn: any, event: any) => void' is not... Remove this comment to see the full error message */}\r\n            <ColumnEditor column={column} onChange={handleColumnChange} />\r\n          </SortableItem>\r\n        ))}\r\n      </Collapse>\r\n    </SortableContainer>\r\n  );\r\n}\r\n\r\nColumnsSettings.propTypes = EditorPropTypes;\r\n"],"file":"ColumnsSettings.js"}