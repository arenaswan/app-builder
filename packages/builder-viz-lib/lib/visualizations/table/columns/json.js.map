{"version":3,"sources":["../../../../src/visualizations/table/columns/json.tsx"],"names":["initJsonColumn","column","prepareData","row","text","name","length","visualizationsSettings","tableCellMaxJSONSize","value","JSON","parse","e","undefined","JsonColumn","friendlyName"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEe,SAASA,cAAT,CAAwBC,MAAxB,EAAqC;AAClD,WAASC,WAAT,CAAqBC,GAArB,EAA+B;AAC7B,QAAMC,IAAI,GAAGD,GAAG,CAACF,MAAM,CAACI,IAAR,CAAhB;;AACA,QAAI,sBAASD,IAAT,KAAkBA,IAAI,CAACE,MAAL,IAAeC,+CAAuBC,oBAA5D,EAAkF;AAChF,UAAI;AACF,eAAO;AAAEJ,UAAAA,IAAF;AAAQK,UAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWP,IAAX;AAAf,SAAP;AACD,OAFD,CAEE,OAAOQ,CAAP,EAAU,CACV;AACD;AACF;;AACD,WAAO;AAAER,MAAAA,IAAF;AAAQK,MAAAA,KAAK,EAAEI;AAAf,KAAP;AACD;;AAED,WAASC,UAAT,OAAkC;AAAA,QAAZX,GAAY,QAAZA,GAAY;;AAChC;AADgC,uBAERD,WAAW,CAACC,GAAD,CAFH;AAAA,QAExBC,IAFwB,gBAExBA,IAFwB;AAAA,QAElBK,KAFkB,gBAElBA,KAFkB;;AAGhC,QAAI,yBAAYA,KAAZ,CAAJ,EAAwB;AACtB,0BAAO;AAAK,QAAA,SAAS,EAAC;AAAf,SAAoC,KAAKL,IAAzC,CAAP;AACD;;AAED,wBACE;AAAK,MAAA,SAAS,EAAC;AAAf,oBACE,6BAAC,4BAAD;AAAqB,MAAA,KAAK,EAAEK;AAA5B,MADF,CADF;AAKD;;AAEDK,EAAAA,UAAU,CAACZ,WAAX,GAAyBA,WAAzB;AAEA,SAAOY,UAAP;AACD;;AAEDd,cAAc,CAACe,YAAf,GAA8B,MAA9B","sourcesContent":["import { isString, isUndefined } from \"lodash\";\r\nimport React from \"react\";\r\nimport JsonViewInteractive from \"@/components/json-view-interactive/JsonViewInteractive\";\r\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\r\n\r\nexport default function initJsonColumn(column: any) {\r\n  function prepareData(row: any) {\r\n    const text = row[column.name];\r\n    if (isString(text) && text.length <= visualizationsSettings.tableCellMaxJSONSize) {\r\n      try {\r\n        return { text, value: JSON.parse(text) };\r\n      } catch (e) {\r\n        // ignore `JSON.parse` error and return default value\r\n      }\r\n    }\r\n    return { text, value: undefined };\r\n  }\r\n\r\n  function JsonColumn({ row }: any) {\r\n    // eslint-disable-line react/prop-types\r\n    const { text, value } = prepareData(row);\r\n    if (isUndefined(value)) {\r\n      return <div className=\"json-cell-invalid\">{\"\" + text}</div>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"json-cell-valid\">\r\n        <JsonViewInteractive value={value} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  JsonColumn.prepareData = prepareData;\r\n\r\n  return JsonColumn;\r\n}\r\n\r\ninitJsonColumn.friendlyName = \"JSON\";\r\n"],"file":"json.js"}