{"version":3,"sources":["../../../../src/visualizations/chart/Editor/ColorsSettings.test.tsx"],"names":["findByTestID","wrapper","testId","find","mount","options","done","enzyme","columns","name","type","rows","a","b","changedOptions","expect","toMatchSnapshot","describe","test","el","globalSeriesType","columnMapping","last","simulate","target","value","colorScheme"],"mappings":"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","sourcesContent":["import { after } from \"lodash\";\r\nimport React from \"react\";\r\nimport enzyme from \"enzyme\";\r\n\r\nimport getOptions from \"../getOptions\";\r\nimport ColorsSettings from \"./ColorsSettings\";\r\n\r\nfunction findByTestID(wrapper: any, testId: any) {\r\n  return wrapper.find(`[data-test=\"${testId}\"]`);\r\n}\r\n\r\nfunction mount(options: any, done: any) {\r\n  options = getOptions(options);\r\n  return enzyme.mount(\r\n    <ColorsSettings\r\n      visualizationName=\"Test\"\r\n      data={{\r\n        columns: [\r\n          { name: \"a\", type: \"string\" },\r\n          { name: \"b\", type: \"number\" },\r\n        ],\r\n        rows: [{ a: \"v\", b: 3.14 }],\r\n      }}\r\n      options={options}\r\n      onOptionsChange={(changedOptions: any) => {\r\n        expect(changedOptions).toMatchSnapshot();\r\n        done();\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\ndescribe(\"Visualizations -> Chart -> Editor -> Colors Settings\", () => {\r\n  describe(\"for pie\", () => {\r\n    test(\"Changes series color\", done => {\r\n      const el = mount(\r\n        {\r\n          globalSeriesType: \"pie\",\r\n          columnMapping: { a: \"x\", b: \"y\" },\r\n        },\r\n        done\r\n      );\r\n\r\n      findByTestID(el, \"Chart.Series.v.Color\")\r\n        .find(\".color-picker-trigger\")\r\n        .last()\r\n        .simulate(\"click\");\r\n      findByTestID(el, \"ColorPicker\")\r\n        .last()\r\n        .find(\"input\")\r\n        .simulate(\"change\", { target: { value: \"red\" } });\r\n    });\r\n  });\r\n\r\n  describe(\"for heatmap\", () => {\r\n    test(\"Changes color scheme\", done => {\r\n      const el = mount(\r\n        {\r\n          globalSeriesType: \"heatmap\",\r\n          columnMapping: { a: \"x\", b: \"y\" },\r\n        },\r\n        done\r\n      );\r\n\r\n      findByTestID(el, \"Chart.Colors.Heatmap.ColorScheme\")\r\n        .last()\r\n        .simulate(\"mouseDown\");\r\n      findByTestID(el, \"Chart.Colors.Heatmap.ColorScheme.Blues\")\r\n        .last()\r\n        .simulate(\"click\");\r\n    });\r\n\r\n    test(\"Sets custom color scheme\", done => {\r\n      const el = mount(\r\n        {\r\n          globalSeriesType: \"heatmap\",\r\n          columnMapping: { a: \"x\", b: \"y\" },\r\n          colorScheme: \"Custom...\",\r\n        },\r\n        after(2, done)\r\n      ); // we will perform 2 actions, so call `done` after all of them completed\r\n\r\n      findByTestID(el, \"Chart.Colors.Heatmap.MinColor\")\r\n        .find(\".color-picker-trigger\")\r\n        .last()\r\n        .simulate(\"click\");\r\n      findByTestID(el, \"ColorPicker\")\r\n        .last()\r\n        .find(\"input\")\r\n        .simulate(\"change\", { target: { value: \"yellow\" } });\r\n\r\n      findByTestID(el, \"Chart.Colors.Heatmap.MaxColor\")\r\n        .find(\".color-picker-trigger\")\r\n        .last()\r\n        .simulate(\"click\");\r\n      findByTestID(el, \"ColorPicker\")\r\n        .last()\r\n        .find(\"input\")\r\n        .simulate(\"change\", { target: { value: \"red\" } });\r\n    });\r\n  });\r\n\r\n  describe(\"for all except of pie and heatmap\", () => {\r\n    test(\"Changes series color\", done => {\r\n      const el = mount(\r\n        {\r\n          globalSeriesType: \"column\",\r\n          columnMapping: { a: \"x\", b: \"y\" },\r\n        },\r\n        done\r\n      );\r\n\r\n      findByTestID(el, \"Chart.Series.b.Color\")\r\n        .find(\".color-picker-trigger\")\r\n        .last()\r\n        .simulate(\"click\");\r\n\r\n      findByTestID(el, \"ColorPicker\")\r\n        .last()\r\n        .find(\"input\")\r\n        .simulate(\"change\", { target: { value: \"red\" } });\r\n    });\r\n  });\r\n});\r\n"],"file":"ColorsSettings.test.js"}