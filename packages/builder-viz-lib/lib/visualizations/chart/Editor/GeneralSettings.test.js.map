{"version":3,"sources":["../../../../src/visualizations/chart/Editor/GeneralSettings.test.tsx"],"names":["findByTestID","wrapper","testId","find","elementExists","length","mount","options","done","enzyme","columns","rows","changedOptions","expect","toMatchSnapshot","describe","test","el","globalSeriesType","showDataLabels","seriesOptions","a","type","b","last","simulate","direction","legend","enabled","showpoints","target","checked","series","missingValuesAsZero","c","toBeTruthy"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport enzyme from \"enzyme\";\r\n\r\nimport getOptions from \"../getOptions\";\r\nimport GeneralSettings from \"./GeneralSettings\";\r\n\r\nfunction findByTestID(wrapper: any, testId: any) {\r\n  return wrapper.find(`[data-test=\"${testId}\"]`);\r\n}\r\n\r\nfunction elementExists(wrapper: any, testId: any) {\r\n  return findByTestID(wrapper, testId).length > 0;\r\n}\r\n\r\nfunction mount(options: any, done: any) {\r\n  options = getOptions(options);\r\n  return enzyme.mount(\r\n    <GeneralSettings\r\n      visualizationName=\"Test\"\r\n      data={{ columns: [], rows: [] }}\r\n      options={options}\r\n      onOptionsChange={changedOptions => {\r\n        expect(changedOptions).toMatchSnapshot();\r\n        done();\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\ndescribe(\"Visualizations -> Chart -> Editor -> General Settings\", () => {\r\n  test(\"Changes global series type\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        showDataLabels: false,\r\n        seriesOptions: {\r\n          a: { type: \"column\" },\r\n          b: { type: \"line\" },\r\n        },\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.GlobalSeriesType\")\r\n      .last()\r\n      .simulate(\"mouseDown\");\r\n    findByTestID(el, \"Chart.ChartType.pie\")\r\n      .last()\r\n      .simulate(\"click\");\r\n  });\r\n\r\n  test(\"Pie: changes direction\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"pie\",\r\n        direction: { type: \"counterclockwise\" },\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.PieDirection\")\r\n      .last()\r\n      .simulate(\"mouseDown\");\r\n    findByTestID(el, \"Chart.PieDirection.Clockwise\")\r\n      .last()\r\n      .simulate(\"click\");\r\n  });\r\n\r\n  test(\"Toggles legend\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        legend: { enabled: true },\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.LegendPlacement\")\r\n      .last()\r\n      .simulate(\"mouseDown\");\r\n    findByTestID(el, \"Chart.LegendPlacement.HideLegend\")\r\n      .last()\r\n      .simulate(\"click\");\r\n  });\r\n\r\n  test(\"Box: toggles show points\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"box\",\r\n        showpoints: false,\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.ShowPoints\")\r\n      .last()\r\n      .find(\"input\")\r\n      .simulate(\"change\", { target: { checked: true } });\r\n  });\r\n\r\n  test(\"Enables stacking\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        series: {},\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.Stacking\")\r\n      .last()\r\n      .simulate(\"mouseDown\");\r\n    findByTestID(el, \"Chart.Stacking.Stack\")\r\n      .last()\r\n      .simulate(\"click\");\r\n  });\r\n\r\n  test(\"Toggles normalize values to percentage\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        series: {},\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.NormalizeValues\")\r\n      .last()\r\n      .find(\"input\")\r\n      .simulate(\"change\", { target: { checked: true } });\r\n  });\r\n\r\n  test(\"Keep missing/null values\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        missingValuesAsZero: true,\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.MissingValues\")\r\n      .last()\r\n      .simulate(\"mouseDown\");\r\n    findByTestID(el, \"Chart.MissingValues.Keep\")\r\n      .last()\r\n      .simulate(\"click\");\r\n  });\r\n\r\n  describe(\"Column mappings should be available\", () => {\r\n    test(\"for bubble\", () => {\r\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\r\n      const el = mount({\r\n        globalSeriesType: \"column\",\r\n        seriesOptions: {\r\n          a: { type: \"column\" },\r\n          b: { type: \"bubble\" },\r\n          c: { type: \"heatmap\" },\r\n        },\r\n      });\r\n\r\n      expect(elementExists(el, \"Chart.ColumnMapping.x\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.y\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.size\")).toBeTruthy();\r\n    });\r\n\r\n    test(\"for heatmap\", () => {\r\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\r\n      const el = mount({\r\n        globalSeriesType: \"heatmap\",\r\n        seriesOptions: {\r\n          a: { type: \"column\" },\r\n          b: { type: \"bubble\" },\r\n          c: { type: \"heatmap\" },\r\n        },\r\n      });\r\n\r\n      expect(elementExists(el, \"Chart.ColumnMapping.x\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.y\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.zVal\")).toBeTruthy();\r\n    });\r\n\r\n    test(\"for all types except of bubble, heatmap and custom\", () => {\r\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\r\n      const el = mount({\r\n        globalSeriesType: \"column\",\r\n        seriesOptions: {\r\n          a: { type: \"column\" },\r\n          b: { type: \"bubble\" },\r\n          c: { type: \"heatmap\" },\r\n        },\r\n      });\r\n\r\n      expect(elementExists(el, \"Chart.ColumnMapping.x\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.y\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.series\")).toBeTruthy();\r\n      expect(elementExists(el, \"Chart.ColumnMapping.yError\")).toBeTruthy();\r\n    });\r\n  });\r\n\r\n  test(\"Toggles horizontal bar chart\", done => {\r\n    const el = mount(\r\n      {\r\n        globalSeriesType: \"column\",\r\n        series: {},\r\n      },\r\n      done\r\n    );\r\n\r\n    findByTestID(el, \"Chart.SwappedAxes\")\r\n      .last()\r\n      .find(\"input\")\r\n      .simulate(\"change\", { target: { checked: true } });\r\n  });\r\n});\r\n"],"file":"GeneralSettings.test.js"}