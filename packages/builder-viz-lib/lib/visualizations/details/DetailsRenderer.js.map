{"version":3,"sources":["../../../src/visualizations/details/DetailsRenderer.tsx"],"names":["renderValue","value","type","formats","date","visualizationsSettings","dateFormat","datetime","dateTimeFormat","moment","isMoment","format","DetailsRenderer","data","page","setPage","rows","length","types","columns","map","column","name","row","key","p","propTypes","RendererPropTypes"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,WAAT,CAAqBC,KAArB,EAAiCC,IAAjC,EAA4C;AAC1C,MAAMC,OAAO,GAAG;AACdC,IAAAA,IAAI,EAAEC,+CAAuBC,UADf;AAEdC,IAAAA,QAAQ,EAAEF,+CAAuBG;AAFnB,GAAhB;;AAKA,MAAIN,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,UAAhC,EAA4C;AAC1C,QAAIO,gBAAOC,QAAP,CAAgBT,KAAhB,CAAJ,EAA4B;AAC1B;AACA,aAAOA,KAAK,CAACU,MAAN,CAAaR,OAAO,CAACD,IAAD,CAApB,CAAP;AACD;AACF;;AAED,SAAO,KAAKD,KAAZ;AACD;;AAEc,SAASW,eAAT,OAAwC;AAAA,MAAbC,IAAa,QAAbA,IAAa;;AAAA,kBAC7B,qBAAS,CAAT,CAD6B;AAAA;AAAA,MAC9CC,IAD8C;AAAA,MACxCC,OADwC;;AAGrD,MAAI,CAACF,IAAD,IAAS,CAACA,IAAI,CAACG,IAAf,IAAuBH,IAAI,CAACG,IAAL,CAAUC,MAAV,KAAqB,CAAhD,EAAmD;AACjD,WAAO,IAAP;AACD;;AAED,MAAMC,KAAK,GAAG,uBAAU,mBAAML,IAAI,CAACM,OAAX,EAAoB,MAApB,CAAV,EAAuC,MAAvC,CAAd,CAPqD,CASrD;;AACA,MAAMA,OAAO,GAAGN,IAAI,CAACM,OAAL,CAAaC,GAAb,CAAkBC,MAAD,IAAiBA,MAAM,CAACC,IAAzC,CAAhB;AACA,MAAMC,GAAG,GAAGV,IAAI,CAACG,IAAL,CAAUF,IAAV,CAAZ;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,6BAAC,qBAAD;AAAc,IAAA,IAAI,EAAC,OAAnB;AAA2B,IAAA,MAAM,EAAE,CAAnC;AAAsC,IAAA,QAAQ;AAA9C,KACG,iBAAIK,OAAJ,EAAaK,GAAG,iBACf,6BAAC,qBAAD,CAAc,IAAd;AAAmB,IAAA,GAAG,EAAEA,GAAxB;AAA6B,IAAA,KAAK,EAAEA;AAApC,KACGxB,WAAW,CAACuB,GAAG,CAACC,GAAD,CAAJ,EAAWN,KAAK,CAACM,GAAD,CAAhB,CADd,CADD,CADH,CADF,EAQGX,IAAI,CAACG,IAAL,CAAUC,MAAV,GAAmB,CAAnB,iBACC;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,6BAAC,mBAAD;AACE,IAAA,eAAe,EAAE,KADnB;AAEE,IAAA,OAAO,EAAEH,IAAI,GAAG,CAFlB;AAGE,IAAA,eAAe,EAAE,CAHnB;AAIE,IAAA,KAAK,EAAED,IAAI,CAACG,IAAL,CAAUC,MAJnB;AAKE,IAAA,QAAQ,EAAEQ,CAAC,IAAIV,OAAO,CAACU,CAAC,GAAG,CAAL;AALxB,IADF,CATJ,CADF;AAsBD;;AAEDb,eAAe,CAACc,SAAhB,GAA4BC,4BAA5B","sourcesContent":["import React, { useState } from \"react\";\r\nimport { map, mapValues, keyBy } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { RendererPropTypes } from \"@/visualizations/prop-types\";\r\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\r\nimport Descriptions from \"antd/lib/descriptions\";\r\nimport Pagination from \"antd/lib/pagination\";\r\n\r\nimport \"./details.less\";\r\n\r\nfunction renderValue(value: any, type: any) {\r\n  const formats = {\r\n    date: visualizationsSettings.dateFormat,\r\n    datetime: visualizationsSettings.dateTimeFormat,\r\n  };\r\n\r\n  if (type === \"date\" || type === \"datetime\") {\r\n    if (moment.isMoment(value)) {\r\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\r\n      return value.format(formats[type]);\r\n    }\r\n  }\r\n\r\n  return \"\" + value;\r\n}\r\n\r\nexport default function DetailsRenderer({ data }: any) {\r\n  const [page, setPage] = useState(0);\r\n\r\n  if (!data || !data.rows || data.rows.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const types = mapValues(keyBy(data.columns, \"name\"), \"type\");\r\n\r\n  // We use columsn to maintain order of columns in the view.\r\n  const columns = data.columns.map((column: any) => column.name);\r\n  const row = data.rows[page];\r\n\r\n  return (\r\n    <div className=\"details-viz\">\r\n      <Descriptions size=\"small\" column={1} bordered>\r\n        {map(columns, key => (\r\n          <Descriptions.Item key={key} label={key}>\r\n            {renderValue(row[key], types[key])}\r\n          </Descriptions.Item>\r\n        ))}\r\n      </Descriptions>\r\n      {data.rows.length > 1 && (\r\n        <div className=\"paginator-container\">\r\n          <Pagination\r\n            showSizeChanger={false}\r\n            current={page + 1}\r\n            defaultPageSize={1}\r\n            total={data.rows.length}\r\n            onChange={p => setPage(p - 1)}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nDetailsRenderer.propTypes = RendererPropTypes;\r\n"],"file":"DetailsRenderer.js"}